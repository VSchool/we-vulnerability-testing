const mg = require('mongoose');
const { MongoMemoryServer } = require('mongodb-memory-server');

const connect = async () => {
    const mongo = await MongoMemoryServer.create({
        instance: {
            port: +process.env.DB_PORT
        }
    });
    const uri = mongo.getUri();
    await mg.connect(uri);
    console.log('Connected to database ' + uri)
};

module.exports = { connect };