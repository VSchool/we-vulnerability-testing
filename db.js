const mg = require('mongoose');
const { seedTestUsers } = require('./services/user');


const connect = async () => {
    const uri = `mongodb://localhost:${process.env.DB_PORT}`
    console.log('Connecting to DB Server...\n')
    await mg.connect(uri);
    if (process.env.ENABLE_SEED) { 
        console.log('Seed enabled. Creating users...\n')
        await seedTestUsers();
    }
    console.log(`Connected to database. Open MongoDB Compass at ${uri} to view user records\n`);
};

const disconnect = async () => {
    await mg.disconnect();
}

module.exports = { connect, disconnect };